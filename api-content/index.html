{"posts":[{"title":"deepin下安装zsh","content":" 参考文档： csdn Linux下安装zsh： https://blog.csdn.net/gatieme/article/details/52741221#t7 zsh官方地址：https://www.zsh.org/ github oh-my-zsh项目： https://github.com/ohmyzsh/ohmyzsh github oh-my-zsh主题介绍： https://github.com/ohmyzsh/ohmyzsh/wiki/themes github oh-my-zsh插件介绍：https://github.com/ohmyzsh/ohmyzsh/wiki/Plugins github oh-my-zsh补充字体安装与配置： https://github.com/powerline/fonts zsh显示执行时间：https://note.pcwu.net/2017/03/25/zsh-theme-execution-time/ 大多数的Linux用户偏爱Bash，因为发行版通常默认的就是它。 Bash确实是不错的Shell，但仍有用很多不尽人意的地方，如自动补全的功能不够强大，定位较长路径不够方便，命令历史管理不够完善等。 介绍使用zsh，功能十分强大..推荐给大家！ 1. zsh介绍 1.1 Linux shell Linux/Unix提供了很多种Shell，为毛要这么多Shell？ 难道用来炒着吃么？那我问你，你同类型的衣服怎么有那么多件？花色，质地还不一样。写程序比买衣服复杂多了，而且程序员往往负责把复杂的事情搞简单，简单的事情搞复杂。牛程序员看到不爽的Shell，就会自己重新写一套，慢慢形成了一些标准，常用的Shell有这么几种，sh、bash、csh等，想知道你的系统有几种shell，可以通过以下命令查看： 1.2 zsh介绍 Zsh是一个Linux下强大的shell, 由于大多数Linux产品安装，以及默认使用bash shell, 但是丝毫不影响极客们对zsh的热衷, 几乎每一款Linux产品都包含有zsh，通常可以用apt-get、urpmi或yum等包管理器进行安装 Zsh具有以下主要功能 开箱即用、可编程的命令行补全功能可以帮助用户输入各种参数以及选项 在用户启动的所有shell中共享命令历史 通过扩展的文件通配符，可以不利用外部命令达到find命令一般展开文件名 改进的变量与数组处理 在缓冲区中编辑多行命令 多种兼容模式，例如使用/bin/sh运行时可以伪装成Bourne shell 可以定制呈现形式的提示符；包括在屏幕右端显示信息，并在键入长命令时自动隐藏 可加载的模块，提供其他各种支持：完整的TCP与Unix域套接字控制，FTP客户端与扩充过的数学函数 完全可定制化 1.3 zsh与oh-my-zsh终极配置 “工欲善其事，必先利其器” 选择oh-my-zsh, oh-my-zsh是基于zsh的功能做了一个扩展，方便的插件管理、主题自定义，以及漂亮的自动完成效果。 在Github上找关于zsh的项目时发现的，试用了一下觉得很方便，不用像上面文章里面提到的那么复杂，配置一些插件的名称即可使用相应的功能。 2. 安装zsh 2.1 安装zsh 如果想配置oh-my-zsh，需要先安装zsh 对于一般的Ubuntu系统，配置好正确的源之后，就能直接键入以下命令安装： 2.2 配置zsh zsh的配置是一门大学问，可以去网上找一些别人配置好的配置文件拿过来使用！ 把.zshrc拷贝到相应用户的home目录即可 (也可以把你的bash的配置文件(~/.bash_prorile或者~/.profile等)给拷贝到zsh的配置文件~/.zshrc里，因为zsh兼容bash) 2.3 取代bash，将zsh设置为默认shell 当然你实在不愿意把zsh当成默认的shell, 而又想使用它, 那么你可以每次进入是都使用zsh进入, 而输入exit退出 2.4 安装oh-my-zsh 直接用zsh会很蛋疼，因为zsh功能很强大但是太复杂，所以需要oh-my-zsh来将它简单化 直接用git从github上面下载包 备份已有的zshrc, 替换zshrc 直接使用脚本安装 需要将克隆下来的文件夹进行一个重命名，防止安装时文件夹名相同进行冲突！ 2.5 配置oh-my-zsh 2.5.1 配置主题 oh-my-zsh集成了大量的主题, 位于oh-my-zsh/theme 配置主题, 可以通过修改~/.zshrc中的环境变量ZSH_THEME来完成 如果你觉得主题太多你可以选择使用随机模式, 来由系统随机选择 2.5.2 配置插件 修改~/.zshrc中plugins 详细插件信息，可以参照zsh插件Plugins介绍 2.5.3 字体配置 安装完zsh之后，切换一些主题，会有一些字符不显示，这是因为系统字体库中没有这些符号的支持，所以我们要手动添加配置一些字体库。 Powerline fonts 安装 如果您正在运行基于Debian或Ubuntu的Linux发行版，则应使用以下命令提供一个软件包来安装Powerline字体： 字体配置 在某些发行版中，默认情况下会忽略Terminess Powerline，并且必须明确允许它们。提供了一个fontconfig文件来启用它。将此文件 从fontconfig目录复制到您的主文件夹下~/.config/fontconfig/conf.d （如果不存在，请创建它）并重新运行fc-cache -vf。 2.5.4 配置执行时间 修改需要修改的主题文件，以agnoster.zsh-theme主题为例： 在文件中添加以下代码： 2.6 更新oh-my-zsh 默认情况下, 您将被提示检查每几周的升级. 如果你想我ZSH自动升级本身没有提示你, 修改~/.zshrc 禁用自动升级, 修改~/.zshrc 当然你也可以选择手动更新 如果你想在任何时间点升级（也许有人刚刚发布了一个新的插件，你不想等待一个星期？)你只需要运行： 2.7 卸载oh-my-zsh 如果你想卸载oh-my-zsh, 只需要执行uninstall_oh_my_zsh zsh， 从命令行运行. 这将删除本身和恢复你以前的bash或者zsh配置. ","link":"https://YaoyaoTsui.github.io/post/deepin_zsh_install/"},{"title":"Security Onion两种方式安装","content":" 基于CentOS 7 下载地址：https://github.com/Security-Onion-Solutions/securityonion/blob/master/VERIFY_ISO.md 安装文档：https://docs.securityonion.net/en/2.3/installation.html#installation-using-security-onion-iso-image 参考文档：https://www.freebuf.com/articles/ics-articles/248260.html 一、安装环境要求 内存：至少12G 硬盘：200G CPU：4核 网卡：2块 系统：CentOS 7 二、准备安装 2.1 方式一：空机ISO安装 下载ISO镜像文件 创建虚拟机 开启虚拟机准备安装系统，输入yes，之后创建安全洋葱系统账号，我这里创建的账号密码为:onion/admin.123 安装完成重启系统后，输入用户名和密码登录系统onion/admin123 弹出security onion安装界面，按照指引进行安装 安装完成后，登录系统配置web登录 这个时候就可以使用该地址进行登录web端管理了 2.2 方式二：基于系统在线安装 Installation on Ubuntu or CentOS 下载安装git 克隆security onion 执行安装 界面操作与ISO安装雷同 2.2.1 问题： 由于是使用的在线安装的方式，所以前提就是保证自己的系统可以访问网络，且域名解析系统正常使用！ 一直卡在26%进度或某一进度（下载某些软件阶段：例如so-acng） 出现kernel:NMI watchdog: BUG: soft lockup - CPU#2 stuck for 28s类似问题 内核软死锁（soft lockup）bug原因分析： Soft lockup名称解释：所谓，soft lockup就是说，这个bug没有让系统彻底死机，但是若干个进程（或者kernel thread）被锁死在了某个状态（一般在内核区域），很多情况下这个是由于内核锁的使用的问题。 Linux内核对于每一个cpu都有一个监控进程，在技术界这个叫做watchdog（看门狗）。通过ps –ef | grep watchdog能够看见，进程名称大概是watchdog/X（数字：cpu逻辑编号1/2/3/4之类的）。这个进程或者线程每一秒钟运行一次，否则会睡眠和待机。这个进程运行会收集每一个cpu运行时使用数据的时间并且存放到属于每个cpu自己的内核数据结构。在内核中有很多特定的中断函数。这些中断函数会调用soft lockup计数，他会使用当前的时间戳与特定（对应的）cpu的内核数据结构中保存的时间对比，如果发现当前的时间戳比对应cpu保存的时间大于设定的阀值，他就假设监测进程或看门狗线程在一个相当可观的时间还没有执。Cpu软锁为什么会产生，是怎么产生的？如果linux内核是经过精心设计安排的CPU调度访问，那么怎么会产生cpu软死锁？那么只能说由于用户开发的或者第三方软件引入，看我们服务器内核panic的原因就是qmgr进程引起。因为每一个无限的循环都会一直有一个cpu的执行流程（qmgr进程示一个后台邮件的消息队列服务进程），并且拥有一定的优先级。Cpu调度器调度一个驱动程序来运行，如果这个驱动程序有问题并且没有被检测到，那么这个驱动程序将会暂用cpu的很长时间。根据前面的描述，看门狗进程会抓住（catch）这一点并且抛出一个软死锁（soft lockup）错误。软死锁会挂起cpu使你的系统不可用。 解决办法： 参考：https://www.cnblogs.com/fusheng11711/p/10767190.html 实测：无用！！！ ","link":"https://YaoyaoTsui.github.io/post/securityonion_install/"},{"title":"CentOS 7装Oracle11gR2","content":"一、环境支持 CentOS 7 内存至少2G swap建议3G 磁盘大约40G Oracle安装包：版本11gR2 linux.x64_11gR2_database_1of2.zip linux.x64_11gR2_database_2of2.zip 二、安装环境准备 2.1 创建运行racle数据库的系统用户和用户组 为啥要创建oinstall用户组及dba组？ 参考：http://www.oracle.com/technetwork/cn/articles/hunter-rac11gr2-iscsi-2-092412-zhs.html#13 理论上单例按照需要3种用户组，实际只建两个oinstall和dba，后面再安装oracle数据库的时候把OSOPER组也设置是dba组。 2.2 创建oracle数据库安装目录 2.3 修改OS系统标识 2.4 安装Oracle数据库所需要的软件包 yum install -y ksh binutils compat-libstdc++-33 elfutils-libelf elfutils-libelf-devel gcc gcc-c++ glibc glibc-common glibc-devel libaio libaio-devel libgcc libstdc++ libstdc++-devel make numactl sysstat libXp unixODBC unixODBC-devel 若遇到无法安装pdksh，可以下载对应rpm包进行安装 2.5 关闭防火墙、关闭selinux 2.6 修改内核参数 2.7 对oracle用户设置限制，提高软件运行性能 2.8 配置用户的环境变量 2.9 解压安装包 三、安装Oracle（图形化界面安装） 3.1 图形界面登陆oracle用户： 3.2 启动oralce安装 会弹出Oracle的安装图形化界面 安装时遇到问题： swap空间不够问题 要求大约在2.67G，实际上只有2G 检查package 之前没有安装的，此时安装，多检查几次 3.3 配置监听 ","link":"https://YaoyaoTsui.github.io/post/centos-7-zhuang-oracle11gr2/"},{"title":" CentOS 7 重启某个服务报错","content":" 错误信息： Authorization not available. Check if polkit service is running or see debug message for more information. 参考链接： https://www.icode9.com/content-3-715773.html https://access.redhat.com/solutions/1543343 解决方案： 根据提示查看polkit状态 如果发现polkit的状态是faild，检查系统已安装polkit并手动启动它 检查是否安装了polkit 安装 polkit 启动polkit 手动启动仍然是此错误，那么执行以下操作！ 确保存在polkitd系统用户和组 重置polkit和polkit-pkla-compat程序包提供的所有文件的权限和用户/组所有权 重启系统 再次重启服务，OK！ 补充： polkit是一个应用程序级别的工具集，通过定义和审核权限规则，实现不同优先级进程间的通讯。 控制决策集中在同一的框架之中，决定低优先级进程是否有权访问高优先级进程 polkit在系统层级进行权限控制，提供了一个低优先级进程和高优先级进程进行通信的系统 在使用systemcd 225的时候会有这类错误异常bug，但是到systemd 229的时候修复了。错误原因是当systemd启动了这个服务的时候policykit -1的postions杀掉了polkit的守护进程。在RHEL,CentOS,ubuntu,debain系统上均可以看到相关bug报告反馈。 ","link":"https://YaoyaoTsui.github.io/post/centos7重启某服务失败/"}]}